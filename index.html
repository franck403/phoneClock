<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>Clock - By Geoloup</title>
<link rel="shortcut icon" href="clock.png">
<link rel="manifest" href="manifest.json" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0,interactive-widget=resizes-content">
<style id="webmakerstyle">
body {
  background-color: black;
  font-family: Arial, sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
  color:darkgray;
  height:100vh;
  overflow:hidden;
  flex-direction:column;
}

#clock {
  font-size: 15vw;
  text-align: center;
}

.seconds {
  color:#454545;
}
#date {
  font-size:1.5em;
}
</style>
</head>
<body>
  <label><input id='lock' type="checkbox" value="keep screen alive"> keep screen alive</label>
<div id="clock"></div>
<div id="date"></div>

<script>
  var screenlock;
function updateClock() {
    var now = new Date();
    var hours = now.getHours();
    var minutes = now.getMinutes();
    var seconds = now.getSeconds();

    // Add leading zeros if necessary
    hours = (hours < 10) ? "0" + hours : hours;
    minutes = (minutes < 10) ? "0" + minutes : minutes;
    seconds = (seconds < 10) ? "0" + seconds : seconds;

    var time = hours + ":" + minutes + ":<span class='seconds'>" + seconds + '</span>';

    document.getElementById('clock').innerHTML = time;
    var date = frenchGreeting()
    document.getElementById('date').innerHTML = date;
    
}

// Update the clock every second
setInterval(updateClock, 1000);

// Update the clock immediately to avoid delay
updateClock();

function frenchGreeting() {
    let date = new Date();
    let hours = date.getHours();
    let months = ["janvier", "f√©vrier", "mars", "avril", "mai", "juin", "juillet", "ao√ªt", "septembre", "octobre", "novembre", "d√©cembre"];
    let day = date.getDate();
    let month = months[date.getMonth()];
    let year = date.getFullYear();

    if (hours < 12) {
        return "Bonjour! Nous sommes en " + month + " le " + day + " " + year + ".";
    } else if (hours < 18) {
        return "Bon apr√®s-midi! Nous sommes en " + month + " le " + day + " " + year + ".";
    } else {
        return "Bonne soir√©e! Nous sommes en " + month + " le " + day + " " + year + ".";
    }
}
  async function getScreenLock() {
  if(isScreenLockSupported()) {
    try {
       screenLock = await navigator.wakeLock.request();
    } catch(err) {
       console.log(err.name, err.message);
    }
    return screenLock;
  }
}
function release() { 
  if(typeof screenLock !== "undeinfed" && screenLock != null) {
    screenLock.release()
    .then(() => {
      console.log("Lock released üéà");
      screenLock = null;
    });
  }
}
  document.addEventListener('visibilitychange', async () => {
  if (screenLock !== null && document.visibilityState === 'visible') {
    screenLock = await navigator.wakeLock.request('screen');
  }
});
  function toggleLock() {
    var val = document.getElementById('lock').checked
    if (val) {
      getScreenLock()
    } else {
      release()
    }
  }
</script>
</body>
</html>
